---
/**
 * Footer Component (Organism)
 *
 * A site footer with customizable sections for navigation,
 * social links, and legal information.
 *
 * @example
 * <Footer siteName="My Site" copyrightYear={2024}>
 *   <nav slot="nav">
 *     <a href="/privacy">Privacy</a>
 *     <a href="/terms">Terms</a>
 *   </nav>
 *   <div slot="social">
 *     <a href="https://twitter.com">Twitter</a>
 *   </div>
 * </Footer>
 *
 * @customization
 * Override these CSS variables to customize:
 * --footer-bg, --footer-padding, --footer-border-color
 */

interface Props {
  /** Site name for copyright */
  siteName?: string;
  /** Copyright year (defaults to current year) */
  copyrightYear?: number;
  /** Custom copyright text (overrides default) */
  copyrightText?: string;
  /** Additional CSS classes */
  class?: string;
  [key: string]: any;
}

const {
  siteName = 'Site Name',
  copyrightYear = new Date().getFullYear(),
  copyrightText,
  class: className = '',
  ...rest
} = Astro.props;

const hasNav = Astro.slots.has('nav');
const hasSocial = Astro.slots.has('social');
const hasContent = Astro.slots.has('default');

const defaultCopyright = `Â© ${copyrightYear} ${siteName}. All rights reserved.`;

const classes = [
  'footer',
  className,
].filter(Boolean).join(' ');
---

<footer class={classes} {...rest}>
  <div class="footer__container">
    {hasContent && (
      <div class="footer__content">
        <slot />
      </div>
    )}

    <div class="footer__bottom">
      <div class="footer__copyright">
        {copyrightText || defaultCopyright}
      </div>

      {hasNav && (
        <nav class="footer__nav">
          <slot name="nav" />
        </nav>
      )}

      {hasSocial && (
        <div class="footer__social">
          <slot name="social" />
        </div>
      )}
    </div>
  </div>
</footer>

<style>
  .footer {
    width: 100%;
    background-color: var(--footer-bg, var(--color-bg-secondary));
    border-top: var(--footer-border-width, 1px) solid
                var(--footer-border-color, var(--color-border-default));
  }

  .footer__container {
    max-width: var(--container-max-width);
    margin: 0 auto;
    padding: var(--footer-padding, var(--space-12) var(--container-padding));
  }

  /* Main content area (for link columns, newsletter, etc.) */
  .footer__content {
    margin-bottom: var(--footer-content-margin, var(--space-8));
    padding-bottom: var(--footer-content-padding, var(--space-8));
    border-bottom: 1px solid var(--footer-divider-color, var(--color-border-default));
  }

  /* Bottom bar with copyright, nav, and social */
  .footer__bottom {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: var(--footer-bottom-gap, var(--space-4));
  }

  /* Copyright text */
  .footer__copyright {
    font-family: var(--footer-font-family, var(--font-family-sans));
    font-size: var(--footer-copyright-size, var(--font-size-sm));
    color: var(--footer-copyright-color, var(--color-text-secondary));
  }

  /* Footer navigation */
  .footer__nav {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--footer-nav-gap, var(--space-6));
  }

  .footer__nav :global(a) {
    font-size: var(--footer-link-size, var(--font-size-sm));
    color: var(--footer-link-color, var(--color-text-secondary));
    text-decoration: var(--footer-link-decoration, none);
    transition: color var(--transition-fast);
  }

  .footer__nav :global(a:hover) {
    color: var(--footer-link-hover-color, var(--color-text-primary));
    text-decoration: var(--footer-link-hover-decoration, underline);
  }

  /* Social links */
  .footer__social {
    display: flex;
    align-items: center;
    gap: var(--footer-social-gap, var(--space-4));
  }

  .footer__social :global(a) {
    color: var(--footer-social-color, var(--color-text-secondary));
    transition: color var(--transition-fast);
  }

  .footer__social :global(a:hover) {
    color: var(--footer-social-hover-color, var(--color-text-primary));
  }

  /* Responsive */
  @media (max-width: 639px) {
    .footer__bottom {
      flex-direction: column;
      text-align: center;
    }

    .footer__nav {
      justify-content: center;
    }

    .footer__social {
      justify-content: center;
    }
  }
</style>
